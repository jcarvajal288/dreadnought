[gd_scene load_steps=35 format=3 uid="uid://b754rm01txrfg"]

[ext_resource type="Texture2D" uid="uid://vhrhuafceojw" path="res://Entities/Characters/Enemies/SwarmAlien/_art/SwarmAlien_all.png" id="1_daqj7"]
[ext_resource type="Script" uid="uid://cctcgf3w0n51a" path="res://Entities/Characters/Enemies/enemy.gd" id="1_l86pn"]
[ext_resource type="Script" uid="uid://blockl131hlo6" path="res://Entities/Characters/animation_player.gd" id="2_qer54"]
[ext_resource type="PackedScene" uid="uid://gec6jw3pw8ie" path="res://Entities/Characters/Components/StateMachine/StateMachine.tscn" id="3_3vsi2"]
[ext_resource type="PackedScene" uid="uid://4xtj3t8rjvjp" path="res://Entities/Characters/Enemies/SwarmAlien/States/Spawn/spawn.tscn" id="4_t4p1i"]
[ext_resource type="PackedScene" uid="uid://o4pfs81aa6dn" path="res://Entities/Characters/Enemies/SwarmAlien/States/Idle/idle.tscn" id="5_l86pn"]
[ext_resource type="PackedScene" uid="uid://dxjc5xbo6t1i1" path="res://Entities/Characters/Enemies/SwarmAlien/States/Move/Move.tscn" id="7_bjoc7"]
[ext_resource type="PackedScene" uid="uid://d2v1g7yqk0taq" path="res://Entities/Characters/Components/Directors/ApproachAndAttack/ApproachAndAttack.tscn" id="8_38b73"]
[ext_resource type="PackedScene" uid="uid://yhp4hwujowqf" path="res://Entities/Characters/Enemies/SwarmAlien/States/Death/death.tscn" id="8_enqol"]
[ext_resource type="PackedScene" uid="uid://b2n5la4gr48d0" path="res://Entities/Characters/Components/Health/Health.tscn" id="9_unmgx"]
[ext_resource type="PackedScene" uid="uid://df7nuoj03q0g6" path="res://Entities/Characters/Components/Hurtbox/Hurtbox.tscn" id="10_q2eax"]

[sub_resource type="CircleShape2D" id="CircleShape2D_sjg7u"]
radius = 4.1231055

[sub_resource type="Animation" id="Animation_sjg7u"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [0]
}

[sub_resource type="Animation" id="Animation_enqol"]
resource_name = "attackDownLeft"
length = 0.60001004
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4, 0.5),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1),
"update": 1,
"values": [102, 103, 104, 105, 106, 107]
}

[sub_resource type="Animation" id="Animation_q2eax"]
resource_name = "attackDownRight"
length = 0.60001004
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4, 0.5),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1),
"update": 1,
"values": [96, 97, 98, 99, 100, 101]
}

[sub_resource type="Animation" id="Animation_3x8y5"]
resource_name = "attackUpLeft"
length = 0.60001004
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4, 0.5),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1),
"update": 1,
"values": [114, 115, 116, 117, 118, 119]
}

[sub_resource type="Animation" id="Animation_ae0pr"]
resource_name = "attackUpRight"
length = 0.60001004
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4, 0.5),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1),
"update": 1,
"values": [108, 109, 110, 111, 112, 113]
}

[sub_resource type="Animation" id="Animation_q14ig"]
resource_name = "damagedDownLeft"
length = 0.40001002
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [124, 125, 126, 127]
}

[sub_resource type="Animation" id="Animation_w07yf"]
resource_name = "damagedDownRight"
length = 0.40001002
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [120, 121, 122, 123]
}

[sub_resource type="Animation" id="Animation_m36ds"]
resource_name = "damagedUpLeft"
length = 0.40001002
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [132, 133, 134, 135]
}

[sub_resource type="Animation" id="Animation_51530"]
resource_name = "damagedUpRight"
length = 0.40001002
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [128, 129, 130, 131]
}

[sub_resource type="Animation" id="Animation_twufx"]
resource_name = "death"
length = 0.90001
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1, 1),
"update": 1,
"values": [136, 137, 138, 139, 140, 141, 142, 143, 144]
}

[sub_resource type="Animation" id="Animation_qer54"]
resource_name = "idleDownLeft"
length = 4.00002
loop_mode = 1
step = 0.2
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.2, 0.4, 0.6, 0.8, 1, 1.2, 1.4, 1.6, 1.8000001, 2, 2.2, 2.4, 2.6000001, 2.8, 3, 3.2, 3.4, 3.6000001, 3.8),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1),
"update": 1,
"values": [20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39]
}

[sub_resource type="Animation" id="Animation_daqj7"]
resource_name = "idleDownRight"
length = 4.00002
loop_mode = 1
step = 0.2
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.2, 0.4, 0.6, 0.8, 1, 1.2, 1.4, 1.6, 1.8000001, 2, 2.2, 2.4, 2.6000001, 2.8, 3, 3.2, 3.4, 3.6000001, 3.8),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1),
"update": 1,
"values": [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19]
}

[sub_resource type="Animation" id="Animation_t4p1i"]
resource_name = "idleUpLeft"
length = 4.00002
loop_mode = 1
step = 0.2
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.2, 0.4, 0.6, 0.8, 1, 1.2, 1.4, 1.6, 1.8000001, 2, 2.2, 2.4, 2.6000001, 2.8, 3, 3.2, 3.4, 3.6000001, 3.8),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1),
"update": 1,
"values": [60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79]
}

[sub_resource type="Animation" id="Animation_3vsi2"]
resource_name = "idleUpRight"
length = 4.00002
loop_mode = 1
step = 0.2
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.2, 0.4, 0.6, 0.8, 1, 1.2, 1.4, 1.6, 1.8000001, 2, 2.2, 2.4, 2.6000001, 2.8, 3, 3.2, 3.4, 3.6000001, 3.8),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1),
"update": 1,
"values": [40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59]
}

[sub_resource type="Animation" id="Animation_bjoc7"]
resource_name = "moveDownLeft"
length = 0.40001002
loop_mode = 1
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [85, 86, 87, 84]
}

[sub_resource type="Animation" id="Animation_l86pn"]
resource_name = "moveDownRight"
length = 0.40001002
loop_mode = 1
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [81, 82, 83, 80]
}

[sub_resource type="Animation" id="Animation_unmgx"]
resource_name = "moveUpLeft"
length = 0.40001002
loop_mode = 1
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [93, 94, 95, 92]
}

[sub_resource type="Animation" id="Animation_38b73"]
resource_name = "moveUpRight"
length = 0.40001002
loop_mode = 1
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [89, 90, 91, 88]
}

[sub_resource type="Animation" id="Animation_vtfj5"]
resource_name = "rot"
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.90000004),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1),
"update": 1,
"values": [145, 146, 147, 148, 149, 150, 151, 152, 153, 154]
}

[sub_resource type="Animation" id="Animation_4hfs7"]
resource_name = "spawn"
length = 1.2000101
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.90000004, 1, 1.1),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1),
"update": 1,
"values": [160, 161, 162, 163, 164, 165, 166, 167, 168, 169, 170, 171]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_sjg7u"]
_data = {
&"RESET": SubResource("Animation_sjg7u"),
&"attackDownLeft": SubResource("Animation_enqol"),
&"attackDownRight": SubResource("Animation_q2eax"),
&"attackUpLeft": SubResource("Animation_3x8y5"),
&"attackUpRight": SubResource("Animation_ae0pr"),
&"damagedDownLeft": SubResource("Animation_q14ig"),
&"damagedDownRight": SubResource("Animation_w07yf"),
&"damagedUpLeft": SubResource("Animation_m36ds"),
&"damagedUpRight": SubResource("Animation_51530"),
&"death": SubResource("Animation_twufx"),
&"idleDownLeft": SubResource("Animation_qer54"),
&"idleDownRight": SubResource("Animation_daqj7"),
&"idleUpLeft": SubResource("Animation_t4p1i"),
&"idleUpRight": SubResource("Animation_3vsi2"),
&"moveDownLeft": SubResource("Animation_bjoc7"),
&"moveDownRight": SubResource("Animation_l86pn"),
&"moveUpLeft": SubResource("Animation_unmgx"),
&"moveUpRight": SubResource("Animation_38b73"),
&"rot": SubResource("Animation_vtfj5"),
&"spawn": SubResource("Animation_4hfs7")
}

[sub_resource type="CircleShape2D" id="CircleShape2D_enqol"]
radius = 4.0

[node name="SwarmAlien" type="CharacterBody2D"]
collision_layer = 4
script = ExtResource("1_l86pn")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
shape = SubResource("CircleShape2D_sjg7u")

[node name="Sprite2D" type="Sprite2D" parent="."]
texture = ExtResource("1_daqj7")
hframes = 20
vframes = 9

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_sjg7u")
}
script = ExtResource("2_qer54")

[node name="StateMachine" parent="." node_paths=PackedStringArray("director", "animation_player", "starting_state") instance=ExtResource("3_3vsi2")]
director = NodePath("../ApproachAndAttack")
animation_player = NodePath("../AnimationPlayer")
starting_state = NodePath("Spawn")

[node name="Spawn" parent="StateMachine" node_paths=PackedStringArray("idle_state") instance=ExtResource("4_t4p1i")]
idle_state = NodePath("../Idle")

[node name="Idle" parent="StateMachine" node_paths=PackedStringArray("move_state") instance=ExtResource("5_l86pn")]
move_state = NodePath("../Move")

[node name="Move" parent="StateMachine" node_paths=PackedStringArray("idle_state") instance=ExtResource("7_bjoc7")]
idle_state = NodePath("../Idle")

[node name="Death" parent="StateMachine" instance=ExtResource("8_enqol")]

[node name="ApproachAndAttack" parent="." node_paths=PackedStringArray("subject") instance=ExtResource("8_38b73")]
attack_range_pixels = 8
tile_distance_to_notice_player = 10
subject = NodePath("..")

[node name="Health" parent="." instance=ExtResource("9_unmgx")]
max_health = 12

[node name="Hurtbox" parent="." node_paths=PackedStringArray("owning_character") instance=ExtResource("10_q2eax")]
owning_character = NodePath("..")

[node name="CollisionShape2D" parent="Hurtbox" index="0"]
shape = SubResource("CircleShape2D_enqol")

[connection signal="animation_finished" from="AnimationPlayer" to="StateMachine/Spawn" method="_on_animation_finished"]
[connection signal="on_death" from="Health" to="." method="_on_death"]
[connection signal="on_death" from="Health" to="StateMachine/Death" method="_on_death"]
[connection signal="on_hit" from="Hurtbox" to="Health" method="_on_hit"]

[editable path="Hurtbox"]
